<!DOCTYPE html>
<html lang="en">
  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Warisan Decode</title>
    <link rel="stylesheet" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="checkpoint1-page">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Warisan Decode</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav ms-auto">
            <a class="nav-link" href="maps-leaflet.html">Home</a>
            <a class="nav-link" href="rules.html">Rules</a>
            <a class="nav-link" href="profile.php">Achievements</a>
            <a class="nav-link" href="logout.php">Logout</a>
          </div>
        </div>
      </div>
    </nav>

    <!-- ‚úÖ Move scroll content here -->
    <div class="scroll-container">
      <section class="scroll-section">
        <h2 class="checkpoint">Checkpoint 1: The Ciphered Fortress</h2>
        <p>
          <strong>üîê Cipher Text:</strong><br />
          Wklv iruw zdv exlow eb wkh Sruwxjxhvh
        </p>
        <img
          src="imgs/lightbulb.png"
          alt="Hint"
          class="hint-icon"
          onclick="showHint()"
        />
        <p id="hint-text" style="display: none; font-size: 10px">
          Use Caesar Cipher ‚Äì shift letters 3 places back!<br />
          The secret lies in who built the fortress <br />Beginner Tip: <br />W
          ‚Üí T<br />
          k ‚Üí h<br />
          l ‚Üí i<br />
          v ‚Üí s<br />
          ...
        </p>
        <div class="answer-box">
          <input
            type="text"
            id="checkpoint-answer"
            placeholder="Enter your answer here"
          />
          <button onclick="checkAnswer()">Submit</button>
          <p id="feedback"></p>
        </div>
      </section>
    </div>
  </body>
</html>

<script>
  function checkAnswer() {
    const userInput = document
      .getElementById("checkpoint-answer")
      .value.trim()
      .toLowerCase();
    const feedback = document.getElementById("feedback");

    if (userInput === "the portuguese") {
      feedback.textContent =
        "‚úÖ Correct! Fort A Famosa was built by the Portuguese! Proceeding to the next checkpoint...";
      feedback.style.color = "green";

      // Unlock heritage site 1
      unlockHeritage(1);

      // Add a short delay before redirecting
      setTimeout(() => {
        window.location.href = "checkpoint1.php";
      }, 1500); // 1.5 seconds delay for user to see the feedback
    } else {
      feedback.textContent = "‚ùå Try again!";
      feedback.style.color = "red";
    }
  }

  function unlockHeritage(siteId) {
    const unlockedSites = JSON.parse(
      localStorage.getItem("unlockedHeritageSites") || "[]"
    );
    if (!unlockedSites.includes(siteId)) {
      unlockedSites.push(siteId);
      localStorage.setItem(
        "unlockedHeritageSites",
        JSON.stringify(unlockedSites)
      );
    }
  }

  function showHint() {
    const hint = document.getElementById("hint-text");
    hint.style.display = hint.style.display === "none" ? "block" : "none";
  }
</script>
